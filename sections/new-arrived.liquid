{% schema %}
{
  "name": "New Arrived",
  "settings": [
    {
      "type": "collection",
      "id": "new_collection",
      "label": "Select collection"
    },
    {
      "type": "color",
      "id": "collection_title_color",
      "label": "Collection title color",
      "default": "#111111"
    },
    {
      "type": "color",
      "id": "product_title_color",
      "label": "Product title color",
      "default": "#222222"
    },
    {
      "type": "color",
      "id": "price_color",
      "label": "Price color",
      "default": "#ff0000"
    }
  ],
  "presets": [
    {
      "name": "New Arrived"
    }
  ]
}
{% endschema %}

<div class="new-arrived">
  {% if section.settings.new_collection != blank %}

    <h2 class="new-arrived-heading">New Arrived</h2>

    {% assign products = section.settings.new_collection.products | limit: 8 %}

    <div class="grid grid--4">
      {% for product in products %}
        <div class="product-card">
          {% if product.metafields.custom.new_label %}
            <span class="product-new-label">New</span>
          {% endif %}

          <a href="{{ product.url }}">
            <img 
              class="product-image"
              src="{{ product.featured_image | image_url: width: 800 }}" 
              alt="{{ product.title }}"
              loading="lazy"
            >
          </a>

          <!-- Назва колекції -->
          <p class="collection-title">{{ section.settings.new_collection.title }}</p>

          <!-- Назва товару -->
          <h4 class="product-title">{{ product.title }}</h4>

          <!-- Ціна -->
          <p class="product-price">{{ product.price | money }}</p>

        </div>
      {% endfor %}
    </div>

  {% endif %}
</div>

<style>
.new-arrived-heading {
  color: {{ section.settings.collection_title_color }};
  text-align: center;
  font-size: 28px;
  font-weight: bold;
  margin-bottom: 20px;
}

.new-arrived .grid {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  justify-content: center;
  padding: 0 20px;
}

.new-arrived .grid--4 .product-card {
  width: calc(20% - 20px);
  box-sizing: border-box;
}

.product-card img {
  width: 100%;
  height: 420px;
  object-fit: cover;
  display: block;
}

.product-card h4.product-title {
  color: {{ section.settings.product_title_color }};
  font-family: var(--font-heading-family);
  margin: 6px 0;
  line-height: 1.3;
}

.product-card p.collection-title {
  color: {{ section.settings.collection_title_color }};
  font-family: var(--font-body-family);
  margin: 6px 0;
  line-height: 1.3;
}

.product-card p.product-price {
  color: {{ section.settings.price_color }};
  font-family: var(--font-body-family);
  margin: 6px 0;
  line-height: 1.3;
}

.product-card {
  position: relative;
}

.product-new-label {
  position: absolute;
  top: 10px;
  left: 10px;
  background-color: #ff0000;
  color: #fff;
  font-size: 12px;
  font-weight: bold;
  padding: 4px 8px;
  border-radius: 4px;
  z-index: 10;
}

@media (max-width: 749px) {
  .new-arrived .grid {
    flex-wrap: wrap;
    gap: 10px;
    justify-content: center;
  }

  .new-arrived .grid--4 .product-card {
    flex: 0 0 45%;
    width: auto;
  }
}
</style>